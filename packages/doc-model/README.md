# @ali/ide-doc-model
## 简述
编辑器和内容提供商之间的缓冲层，默认提供本地空间的文件内容提供方式和空文件的提供方式。

## DocumentModel
document model 是一个文件资源到编辑器的映射，从相同的 uri 作为唯一标示，可以 resolve 到实际的文件资源内容，也可以 resolve 到编辑器中在编辑中的模型，负责处理相互之前的修改同步以及冲突处理。同时也扩展了一些非编辑器状态到 ide 的其它 UI 部分，提供更完整的编辑体验。

> Tips：document model 在做修改同步的时候，不在使用全局内容传输，而是改为使用一个 base + changes 的模式，在面对超大文件的时候，更高频的操作应该是局部的字符串修改、保存，这样可以改善对大文件的性能，而在非高频的操作，比如说整文件粘贴，局部的方式和整体几乎也没有区别，一些额外的字段先对比于文件内容而言可以忽略不计。

## IDocumentModelContentProvider
虽然默认提供了本地文件的访问提供商，但是也有可能有第三更增强或者额外的资源提供方式，所以我们提供了内容提供商的注册方式。对于一个内容提供商，它需要实现一个 build 方法从远端获取资源、初始化一个新的文档资源，一个 persist 方式用于将编辑器中的修改持久化到远端，另外还有增删改查的四个事件，用于在编辑过程中对文件的修改实行同步。一旦在编辑器中打开这个文件，每一个资源提供商应该判断是否应该由自己监听这个资源，并将本地的变化通过这些事件交给前台。

